{% extends 'base.html' %}
{% load custom_tags %}

{% block content %}
  <h1>수정하기</h1>
  <a href="/feeds">메인으로 돌아가기</a>
  <form action="/feeds/{{feed.id}}/edit/" method="POST">
    {% csrf_token %} 
    <p>title</p>
    <input name="title" value="{{feed.title}}" maxlength="30" required /> <br />
    <p>content</p>
    A: <input name="content_a" value="{{feed.content_a}}" size="40"  maxlength="21" required /> <br />
    B: <input name="content_b" value="{{feed.content_b}}" size="40"  maxlength="21" required /> <br />
    <!--분기처리필요-->
    HASH TAG: 
    <input name="hash_tag_raw" placeholder="#이러한 #형태로 #입력하세요" size="30"/> <br />
    <input type="hidden" name="next" value="{{next}}" />
    <input name="img_a" type="file" accept="image/*" required/> <br />
    <input name="img_b" type="file" accept="image/*" required/> <br />
          <br>
    <input type="submit" value="submit" />
    <br/>
    {% get_feed_tags feed.id as feed_tags %}
    {% for tag in feed_tags %}
    # {{ tag }} 




    {% comment %}
    tag 삭제를 어떻게 구현한담??? 이거 폼태그 안에 폼태그가 있어서인지, 태그삭제가 되지 않고 수정하기 submit이 되어 POST가 날아가는데...

    {{tag.id}}
      <form action="/feeds/{{ feed.id }}/delete_tag/{{ tag.id }}/" method="DELETE">
      {% csrf_token %}
      <button type="submit">X</button>
      </form>
      
      {% endcomment %}
    &nbsp&nbsp
    {% endfor %}
  </form>

<!--navigation bar-->
{% if user.is_authenticated %}
  <div class="nav-bar-wrap">
    <a href="/feeds/">
      <div>
        <i class="material-icons-outlined" style="font-size: 29px;">home</i>
      </div>
    </a>
    <a href="/feeds/mysubscribe/">
      <div>
        <i class="material-icons-outlined" style="font-size: 26px; margin-top: 2px;">library_books</i>
      </div>
    </a>
    <a href="/feeds/new">
      <div>
        <i class="material-icons-outlined" style="font-size: 29px;">add_circle_outline</i>
      </div>
    </a>
    <a href="/feeds/mynotification">
      <div>
        {% get_noti_amount user.id as noti_amount %}
        {% if noti_amount == 0 %}
          <i class="material-icons-outlined" style="font-size: 29px; margin-right: -2px;">notifications_none</i>
        {% else %}
          <div class="material-icons mdl-badge mdl-badge--overlap" style="font-size: 28px; margin-top: px; margin-right: -3px;" data-badge="{{noti_amount}}">notifications_none</div>
        {% endif%}
      </div>
    </a>
    <a href="/feeds/creator/{{ request.user.username }}/">
      {% if user.profile.image.url != "/media/False"%}
        <div class="user-face-nav mb-1" style="background: url('{{ user.profile.image.url }}') center / cover;"></div>
      {% else %}
        <div class="user-face-nav mb-1" style="background: url('/static/feedpage/default_avatar.png') center / cover;"></div>
      {% endif %}
    </a>
  </div>
{% else%}
  <div class="float-btn flex-center bg-black">
    <a href="/accounts/login">
      <div class="w-100 h-100 font-white letter-space font-15">
        참여하기
      </div>
    </a>
  </div>
{% endif %}

{% endblock content %}