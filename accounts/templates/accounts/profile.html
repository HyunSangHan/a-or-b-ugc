{% extends 'base.html' %}
{% load staticfiles %}
{% load custom_tags %}

{% block content %}

<h1>Profile Edit</h1>
{% if error %}
{{ error }}
{% endif %}

<form action='{% url "profile" %}' method='POST'>
    {% csrf_token %}
    <p>
        이메일주소(ID) : {{ profile.user.email}}
    </p>
    <p>
        현재 비번 : 
        <input name='current_password' type='password' value='' required/>
    </p>
    <p>
        새로운 비번 : 
        <input name='password1' type='password' value='' />
    </p>
    <p>
        새로운 비번 확인 : 
        <input name='password2' type='password' value='' />
    </p>
    <p>
        닉네임 : 
        <input name='username' type='text' value='{{ profile.user.username }}' />
    </p>
    <p>
        성별 :
        <input type='radio' id='genderChoice1' name='gender' value=True required> 
        <label for='genderChoice1'>남성</label>
        <input type='radio' id='genderChoice2' name='gender' value=False> 
        <label for='genderChoice2'>여성</label>
    </p>
    <p> 
        생년월일 : <input type='date' name='birthday' value='{{ profile.birthday|date:"Y-m-d"}}'/> <br/>
    </p>
    <p>
        배경지역 :
        <select name='region' required>
            <option disabled selected value> -- 선택하세요 -- </option>
            <option value="1">서울/경기</option>
            <option value="2">강원</option>
            <option value="3">충청</option>
            <option value="4">호남</option>
            <option value="5">영남</option>
            <option value="6">제주</option>
            <option value="7">해외</option>
            <option value="8">기타</option>
        </select>
    </p>
    <p>
        전공분야 :
        <input type='radio' id='majorChoice1' name='major' value='문과' required> 
        <label for='majorChoice1'>문과</label>
        <input type='radio' id='majorChoice2' name='major' value='이과'> 
        <label for='majorChoice2'>이과</label>
        <input type='radio' id='majorChoice3' name='major' value='예체능'> 
        <label for='majorChoice3'>예체능</label>
        <input type='radio' id='majorChoice4' name='major' value='기타'> 
        <label for='majorChoice4'>기타</label>
    </p>
    <p>
        정치성향 :
        <select name='politics' required>
            <option disabled selected value> -- 선택하세요 -- </option>
            <option value="5">진보</option>
            <option value="4">중도진보</option>
            <option value="3">중도</option>
            <option value="2">중도보수</option>
            <option value="1">보수</option>
        </select>
    </p>
    <input type='submit' value='정보 수정하기' />
</form>


<!--navigation bar-->
{% if user.is_authenticated %}
  <div class="nav-bar-wrap">
    <a href="/feeds/">
      <div>
        <i class="material-icons-outlined" style="font-size: 29px;">home</i>
      </div>
    </a>
    <a href="/feeds/mysubscribe/">
      <div>
        <i class="material-icons-outlined" style="font-size: 26px; margin-top: 2px;">library_books</i>
      </div>
    </a>
    <a href="/feeds/new">
      <div>
        <i class="material-icons-outlined" style="font-size: 29px;">add_circle_outline</i>
      </div>
    </a>
    <a href="/feeds/mynotification">
      <div>
        {% get_noti_amount user.id as noti_amount %}
        {% if noti_amount == 0 %}
          <i class="material-icons-outlined" style="font-size: 29px; margin-right: -2px;">notifications_none</i>
        {% else %}
          <div class="material-icons mdl-badge mdl-badge--overlap" style="font-size: 28px; margin-top: px; margin-right: -3px;" data-badge="{{noti_amount}}">notifications_none</div>
        {% endif%}
      </div>
    </a>
    <a href="/feeds/creator/{{ request.user.username }}/">
      {% if user.profile.image.url != "/media/False"%}
        <div class="user-face-nav mb-1" style="background: url('{{ user.profile.image.url }}') center / cover;"></div>
      {% else %}
        <div class="user-face-nav mb-1" style="background: url('/static/feedpage/default_avatar.png') center / cover;"></div>
      {% endif %}
    </a>
  </div>
{% else%}
  <div class="float-btn flex-center bg-black">
    <a href="/accounts/login">
      <div class="w-100 h-100 font-white letter-space font-15">
        참여하기
      </div>
    </a>
  </div>
{% endif %}

{% endblock %}