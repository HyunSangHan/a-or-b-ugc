{% extends 'base_black.html' %}
{% load custom_tags %}

{% block content %}
<form action='{% url "profile" %}' method='POST'>
  {% csrf_token %}

  {% comment %} {{ user.socialaccount_set.first.get_avatar_url }} {% endcomment %}
  <div class="page-content-black mdl-layout__content bg-black w-100 font-white">
    <div class="container relative">
      {% comment %} {% if profile.image.url != "/media/False" %} {% endcomment %}
      {% if profile.image_url is not None %}
        <div class="creator-img" style="background: url('{{ profile.image_url }}') center / cover;">
      {% else %}
        <div class="creator-img" style="background: url('/static/feedpage/default_avatar.png') center / cover;">
      {% endif %}
          <div class="photo-edit-btn">
            <i class="material-icons" style="font-size: 13px;" onclick="return alert('아직 기능 개발중')">photo_camera</i>
          </div>
        </div>
      {% comment %} {% else %}
        <div class="creator-img" style="background: url('/static/feedpage/default_avatar.png') center / cover;"></div>
      {% endif %} {% endcomment %}
      <div class="m-auto black-creator">
        <div class="contents-margin">
          <div class="creator-name-card">
            <div class="creator-name ellipsis">
              <input class="creator-name-edit ellipsis" name='username' type='text' value='{{ profile.user.username }}' />
            </div>

            <div class="creator-subs-num">
              {{ profile.user.email}}
            </div>
          </div>
          <div class="version-status flex">
            {% if profile.is_premium %}
              Premium user입니다. <div class="qmark" onclick="return alert('아젠다별 상세 통계까지 확인할 수 있습니다.')">?</div>
            {% else %}
              아직 Lite user입니다. 프로필을 모두 채워주세요. <div class="qmark" onclick="return alert('프로필을 모두 채우고 Premium user로 업그레이드 해보세요. 시원시원하게 상세 통계까지 확인할 수 있습니다.')">?</div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="m-auto contents">
      <div class="contents-margin">
        {% if error %}
        {{ error }}
        {% endif %}
        <div class="font-13 mt-7">성별</div>
        <div class="each-profile radio-form">
          <input type='radio' id='genderChoice1' name='gender' value=True required> 
          <label for='genderChoice1' class="flex-start">남성</label>
          <input type='radio' id='genderChoice2' name='gender' value=False> 
          <label for='genderChoice2' class="flex-start">여성</label>
        </div>
        <div class="each-profile-ul mt-2"></div>
        <div class="font-13 mt-7">생년월일</div>
        <div class="each-profile">
          <input type='date' name='birthday' value='{{ profile.birthday|date:"Y-m-d"}}' class="date-form"/> <br/>
        </div>
        <div class="each-profile-ul mt-2"></div>
        <div class="font-13 mt-7">배경지역</div>
        <div class="each-profile">
          <select class='select-form' name='region' required>
            <option disabled selected value> 지역을 선택하세요 </option>
            <option value="1">서울/경기</option>
            <option value="2">강원</option>
            <option value="3">충청</option>
            <option value="4">호남</option>
            <option value="5">영남</option>
            <option value="6">제주</option>
            <option value="7">해외</option>
            <option value="8">기타</option>
          </select>
        </div>
        <div class="each-profile-ul mt-2"></div>
        <div class="font-13 mt-7">전공분야</div>
        <div class="each-profile radio-form">
            <input type='radio' id='majorChoice1' name='major' value='문과' required> 
            <label for='majorChoice1' class="flex-start">문과</label>
            <input type='radio' id='majorChoice2' name='major' value='이과'> 
            <label for='majorChoice2' class="flex-start">이과</label>
            <input type='radio' id='majorChoice3' name='major' value='예체능'> 
            <label for='majorChoice3' class="flex-center">예체능</label>
            <input type='radio' id='majorChoice4' name='major' value='기타'> 
            <label for='majorChoice4' class="flex-end">기타</label>
        </div>
        <div class="each-profile-ul mt-2"></div>
        <div class="font-13 mt-7">정치성향</div>
        <div class="each-profile">
          <select name='politics' required>
            <option disabled selected value> -- 선택하세요 -- </option>
            <option value="5">진보</option>
            <option value="4">중도진보</option>
            <option value="3">중도</option>
            <option value="2">중도보수</option>
            <option value="1">보수</option>
          </select>
        </div>
          <p>폰: 아이폰 / 안드로이드</p>
          <p>종교: 무교 / 기독교계열 / 불교계열 / 기타종교  </p>
          {% comment %} <p>
              아이폰 좋아함? :
              <input type='radio' id='genderChoice1' name='gender' value=True required> 
              <label for='genderChoice1'>남성</label>
              <input type='radio' id='genderChoice2' name='gender' value=False> 
              <label for='genderChoice2'>여성</label>
          </p>
          <p>
              종교 :
              <input type='radio' id='genderChoice1' name='gender' value=True required> 
              <label for='genderChoice1'>남성</label>
              <input type='radio' id='genderChoice2' name='gender' value=False> 
              <label for='genderChoice2'>여성</label>
          </p> {% endcomment %}
          <input type='submit' value='정보 수정하기' />
      </div>
    </div>
  </div>
</form>

<!--navigation bar-->
{% if user.is_authenticated %}
  <div class="nav-bar-wrap">
    <a href="/feeds/">
      <div>
        <i class="material-icons-outlined" style="font-size: 29px;">home</i>
      </div>
    </a>
    <a href="/feeds/mysubscribe/">
      <div>
        <i class="material-icons-outlined" style="font-size: 26px; margin-top: 2px;">library_books</i>
      </div>
    </a>
    <a href="/feeds/new">
      <div>
        <i class="material-icons-outlined" style="font-size: 29px;">add_circle_outline</i>
      </div>
    </a>
    <a href="/feeds/mynotification">
      <div>
        {% get_noti_amount user.id as noti_amount %}
        {% if noti_amount == 0 %}
          <i class="material-icons-outlined" style="font-size: 29px; margin-right: -2px;">notifications_none</i>
        {% else %}
          <div class="material-icons mdl-badge mdl-badge--overlap" style="font-size: 28px; margin-top: px; margin-right: -3px;" data-badge="{{noti_amount}}">notifications_none</div>
        {% endif%}
      </div>
    </a>
    <a href="/feeds/creator/{{ request.user.username }}/">
      {% if user.profile.image.url != "/media/False"%}
        <div class="user-face-nav mb-1" style="background: url('{{ user.profile.image.url }}') center / cover;"></div>
      {% else %}
        <div class="user-face-nav mb-1" style="background: url('/static/feedpage/default_avatar.png') center / cover;"></div>
      {% endif %}
    </a>
  </div>
{% else%}
  <div class="float-btn flex-center bg-black">
    <a href="/accounts/login">
      <div class="w-100 h-100 font-white letter-space font-15">
        참여하기
      </div>
    </a>
  </div>
{% endif %}
{% endblock content %}
